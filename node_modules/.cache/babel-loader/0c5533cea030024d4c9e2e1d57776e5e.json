{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrador\\\\Desktop\\\\Programacion\\\\HuklStore\\\\hulk-store\\\\src\\\\components\\\\CardFin.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport Swal from \"sweetalert2\";\nimport { Form, Card, Container, Button, Image } from \"react-bootstrap\";\nimport { postOrders } from \"../helpers/orders\";\nimport { useNavigate } from \"react-router-dom\";\nimport { putProducts } from \"../helpers/products\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst token = JSON.parse(localStorage.getItem(\"auth\")) && JSON.parse(localStorage.getItem(\"auth\")).token;\n\nconst CardFin = _ref => {\n  _s();\n\n  let {\n    pedidos,\n    setEco,\n    setPedidos,\n    btnDisable\n  } = _ref;\n  let sumaTotal = 0;\n  const navigate = useNavigate();\n  const usuario = JSON.parse(localStorage.getItem(\"auth\")).usuario;\n  const carrito = JSON.parse(localStorage.getItem(\"carrito\")); // const [continuo, setContinuo] = useState({ valor: 0 });\n\n  const hayNegativo = null;\n  console.log(hayNegativo);\n  const [total, setTotal] = useState(0);\n  useEffect(() => {\n    setEco(true);\n    setTotal(sumaTotal);\n    setEco(false);\n  });\n\n  for (let i = 0; i < carrito.length; i++) {\n    sumaTotal += carrito[i].precio * carrito[i].cantidad;\n  }\n\n  const getRandomNumberBetween = (min, max) => {\n    return Math.floor(Math.random() * (max - min + 1) + min);\n  };\n\n  const confirmarPedido = () => {\n    let orden = {\n      products: carrito,\n      provincia: usuario.provincia,\n      localidad: usuario.localidad,\n      direccionEnvio: usuario.direccionEnvio,\n      precioTotal: total\n    };\n    carrito.forEach(product => {\n      product.stock -= product.cantidad;\n      console.log(product.stock);\n\n      if (product.stock < 0) {\n        const hayNegativo = \"si hay\"; // setContinuo(continuo);\n\n        Swal.fire({\n          title: `Stock insuficiente, solo quedan ${product.stock + product.cantidad} unidades de ${product.nombre}`,\n          icon: \"error\",\n          confirmButtonColor: \"#3085d6\"\n        });\n\n        const redireccion = () => navigate(\"../\", {\n          replace: true\n        });\n\n        localStorage.setItem(\"carrito\", JSON.stringify([]));\n        console.log(hayNegativo);\n        return redireccion();\n      }\n    });\n    carrito.forEach(product => {\n      if (!hayNegativo) {\n        putProducts(product._id, product).then(respuesta => {\n          console.log(\"hace el put\");\n\n          if (respuesta.errors) {\n            return window.alert(respuesta.errors[0].msg);\n          } else {\n            Swal.fire({\n              title: \"Stock de producto editado\",\n              icon: \"success\",\n              confirmButtonColor: \"#3085d6\"\n            });\n          }\n        });\n      }\n    });\n    console.log(hayNegativo);\n\n    if (!hayNegativo) {\n      console.log(\"hace el post\");\n      postOrders(orden).then(respuesta => {\n        if (respuesta.errors) {\n          return window.alert(respuesta.errors[0].msg);\n        } else {\n          Swal.fire({\n            title: \"Pedido confirmado\",\n            icon: \"success\",\n            confirmButtonColor: \"#3085d6\"\n          });\n\n          const redireccion = () => navigate(\"../\", {\n            replace: true\n          });\n\n          redireccion();\n          localStorage.setItem(\"carrito\", JSON.stringify([]));\n        }\n      });\n    }\n  };\n\n  console.log(hayNegativo);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    className: \"text-center row\",\n    children: [carrito.map((pedido, index) => /*#__PURE__*/_jsxDEV(Card, {\n      className: \"mb-3 mi-4 justify-center col-4 mx-auto\",\n      children: [/*#__PURE__*/_jsxDEV(Card.Body, {\n        children: [/*#__PURE__*/_jsxDEV(Image, {\n          className: \"card-carrito\",\n          src: pedido.imagen\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Card.Title, {\n          className: \"mb-2\",\n          children: pedido.nombre\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n          children: [\"$ \", pedido.precio]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Form, {\n          children: /*#__PURE__*/_jsxDEV(Form.Control, {\n            onChange: e => {\n              pedidos[index] = { ...pedido,\n                notas: e.target.value\n              };\n              setPedidos(pedidos);\n            },\n            label: \"Comments\",\n            as: \"textarea\",\n            maxLength: \"150\",\n            placeholder: \"\\xBFNos queres aclarar algo sobre tu pedido?\",\n            style: {\n              height: \"100px\"\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n          children: /*#__PURE__*/_jsxDEV(\"h5\", {\n            children: [\"Cantidad: \", pedido.cantidad]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        className: \"mb-4 pull-right mt-3\",\n        variant: \"light\",\n        onClick: () => {\n          const _pedidos = JSON.parse(localStorage.getItem(\"carrito\")) || [];\n\n          const filt = localStorage.setItem(\"carrito\", JSON.stringify(_pedidos.map(e => e).filter(e => e._id !== pedido._id)));\n          setPedidos(pedidos.filter(e => pedido._id !== e._id));\n        },\n        children: \"BORRAR\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }, this)]\n    }, getRandomNumberBetween(1, 1000000), true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"row mb-2 col-12\",\n      children: /*#__PURE__*/_jsxDEV(\"h5\", {\n        className: \"mb-4 pull-right mt-3 mx-auto\",\n        children: [\"Precio total del pedido:\", sumaTotal]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 153,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Card.Title, {\n      className: \"mb-2 col-12\",\n      children: pedidos.nombre\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      className: \"mb-4 pull-right mt-3 mx-auto\",\n      variant: \"light\",\n      disabled: btnDisable,\n      onClick: () => confirmarPedido(),\n      children: \"CONFIRMAR PEDIDO\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CardFin, \"n24dmbBUlaUasa7gY6M6jPdfKr4=\", false, function () {\n  return [useNavigate];\n});\n\n_c = CardFin;\nexport default CardFin;\n\nvar _c;\n\n$RefreshReg$(_c, \"CardFin\");","map":{"version":3,"sources":["C:/Users/Administrador/Desktop/Programacion/HuklStore/hulk-store/src/components/CardFin.jsx"],"names":["React","useEffect","useState","Swal","Form","Card","Container","Button","Image","postOrders","useNavigate","putProducts","token","JSON","parse","localStorage","getItem","CardFin","pedidos","setEco","setPedidos","btnDisable","sumaTotal","navigate","usuario","carrito","hayNegativo","console","log","total","setTotal","i","length","precio","cantidad","getRandomNumberBetween","min","max","Math","floor","random","confirmarPedido","orden","products","provincia","localidad","direccionEnvio","precioTotal","forEach","product","stock","fire","title","nombre","icon","confirmButtonColor","redireccion","replace","setItem","stringify","_id","then","respuesta","errors","window","alert","msg","map","pedido","index","imagen","e","notas","target","value","height","_pedidos","filt","filter"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Swal from \"sweetalert2\";\r\nimport { Form, Card, Container, Button, Image } from \"react-bootstrap\";\r\nimport { postOrders } from \"../helpers/orders\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { putProducts } from \"../helpers/products\";\r\n\r\nconst token =\r\n  JSON.parse(localStorage.getItem(\"auth\")) &&\r\n  JSON.parse(localStorage.getItem(\"auth\")).token;\r\n\r\nconst CardFin = ({ pedidos, setEco, setPedidos, btnDisable }) => {\r\n  let sumaTotal = 0;\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const usuario = JSON.parse(localStorage.getItem(\"auth\")).usuario;\r\n  const carrito = JSON.parse(localStorage.getItem(\"carrito\"));\r\n  // const [continuo, setContinuo] = useState({ valor: 0 });\r\n  const hayNegativo = null;\r\n  console.log(hayNegativo);\r\n  const [total, setTotal] = useState(0);\r\n\r\n  useEffect(() => {\r\n    setEco(true);\r\n    setTotal(sumaTotal);\r\n    setEco(false);\r\n  });\r\n  for (let i = 0; i < carrito.length; i++) {\r\n    sumaTotal += carrito[i].precio * carrito[i].cantidad;\r\n  }\r\n\r\n  const getRandomNumberBetween = (min, max) => {\r\n    return Math.floor(Math.random() * (max - min + 1) + min);\r\n  };\r\n\r\n  const confirmarPedido = () => {\r\n    let orden = {\r\n      products: carrito,\r\n      provincia: usuario.provincia,\r\n      localidad: usuario.localidad,\r\n      direccionEnvio: usuario.direccionEnvio,\r\n      precioTotal: total,\r\n    };\r\n    carrito.forEach((product) => {\r\n      product.stock -= product.cantidad;\r\n      console.log(product.stock);\r\n      if (product.stock < 0) {\r\n        const hayNegativo = \"si hay\";\r\n        // setContinuo(continuo);\r\n\r\n        Swal.fire({\r\n          title: `Stock insuficiente, solo quedan ${\r\n            product.stock + product.cantidad\r\n          } unidades de ${product.nombre}`,\r\n          icon: \"error\",\r\n          confirmButtonColor: \"#3085d6\",\r\n        });\r\n\r\n        const redireccion = () => navigate(\"../\", { replace: true });\r\n        localStorage.setItem(\"carrito\", JSON.stringify([]));\r\n\r\n        console.log(hayNegativo);\r\n        return redireccion();\r\n      }\r\n    });\r\n    carrito.forEach((product) => {\r\n      if (!hayNegativo) {\r\n        putProducts(product._id, product).then((respuesta) => {\r\n          console.log(\"hace el put\");\r\n          if (respuesta.errors) {\r\n            return window.alert(respuesta.errors[0].msg);\r\n          } else {\r\n            Swal.fire({\r\n              title: \"Stock de producto editado\",\r\n              icon: \"success\",\r\n              confirmButtonColor: \"#3085d6\",\r\n            });\r\n          }\r\n        });\r\n      }\r\n    });\r\n    console.log(hayNegativo);\r\n    if (!hayNegativo) {\r\n      console.log(\"hace el post\");\r\n      postOrders(orden).then((respuesta) => {\r\n        if (respuesta.errors) {\r\n          return window.alert(respuesta.errors[0].msg);\r\n        } else {\r\n          Swal.fire({\r\n            title: \"Pedido confirmado\",\r\n            icon: \"success\",\r\n            confirmButtonColor: \"#3085d6\",\r\n          });\r\n          const redireccion = () => navigate(\"../\", { replace: true });\r\n          redireccion();\r\n          localStorage.setItem(\"carrito\", JSON.stringify([]));\r\n        }\r\n      });\r\n    }\r\n  };\r\n  console.log(hayNegativo);\r\n\r\n  return (\r\n    <Container className=\"text-center row\">\r\n      {carrito.map((pedido, index) => (\r\n        <Card\r\n          key={getRandomNumberBetween(1, 1000000)}\r\n          className=\"mb-3 mi-4 justify-center col-4 mx-auto\"\r\n        >\r\n          <Card.Body>\r\n            <Image className=\"card-carrito\" src={pedido.imagen} />\r\n            <Card.Title className=\"mb-2\">{pedido.nombre}</Card.Title>\r\n            <Card.Text>$ {pedido.precio}</Card.Text>\r\n            <Form>\r\n              <Form.Control\r\n                onChange={(e) => {\r\n                  pedidos[index] = { ...pedido, notas: e.target.value };\r\n                  setPedidos(pedidos);\r\n                }}\r\n                label=\"Comments\"\r\n                as=\"textarea\"\r\n                maxLength=\"150\"\r\n                placeholder=\"Â¿Nos queres aclarar algo sobre tu pedido?\"\r\n                style={{ height: \"100px\" }}\r\n              />\r\n            </Form>\r\n            <Card.Text>\r\n              <h5>Cantidad: {pedido.cantidad}</h5>\r\n            </Card.Text>\r\n          </Card.Body>\r\n          <Button\r\n            className=\"mb-4 pull-right mt-3\"\r\n            variant=\"light\"\r\n            onClick={() => {\r\n              const _pedidos =\r\n                JSON.parse(localStorage.getItem(\"carrito\")) || [];\r\n              const filt = localStorage.setItem(\r\n                \"carrito\",\r\n                JSON.stringify(\r\n                  _pedidos.map((e) => e).filter((e) => e._id !== pedido._id)\r\n                )\r\n              );\r\n              setPedidos(pedidos.filter((e) => pedido._id !== e._id));\r\n            }}\r\n          >\r\n            BORRAR\r\n          </Button>\r\n        </Card>\r\n      ))}\r\n\r\n      <div className=\"row mb-2 col-12\">\r\n        <h5 className=\"mb-4 pull-right mt-3 mx-auto\">\r\n          Precio total del pedido:{sumaTotal}\r\n        </h5>\r\n      </div>\r\n\r\n      <Card.Title className=\"mb-2 col-12\">{pedidos.nombre}</Card.Title>\r\n      <Button\r\n        className=\"mb-4 pull-right mt-3 mx-auto\"\r\n        variant=\"light\"\r\n        disabled={btnDisable}\r\n        onClick={() => confirmarPedido()}\r\n      >\r\n        CONFIRMAR PEDIDO\r\n      </Button>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default CardFin;\r\n"]},"metadata":{},"sourceType":"module"}